.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH SELECTION 1 "perl 5.005, patch 03" "30/Dec/2000" "User Contributed Perl Documentation"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
Tk::Selection \- Manipulate the X selection
.SH "SYNOPSIS"
\fI$widget\fR\->\fBSelection\fR\fIOption\fR?(\fIargs\fR)?
.SH "DESCRIPTION"
This command provides an interface to the X selection mechanism and
implements the full selection functionality described in the
X Inter-Client Communication Conventions Manual (ICCCM).
.PP
The widget object used to invoke the methods below determines which
display is used to access the selection.
In order to avoid conflicts with \fBselection\fR methods of widget classes
(e.g. \fBText\fR) this set of methods uses the prefix \fBSelection\fR.
The following methods are currently supported:
.Ip "\fI$widget\fR\->\fBSelectionClear\fR?(\fB\-selection\fR=>\fIselection\fR)?" 4
If \fIselection\fR exists anywhere on \fI$widget\fR's display, clear it
so that no window owns the selection anymore.  \fISelection\fR
specifies the X selection that should be cleared, and should be an
atom name such as \s-1PRIMARY\s0 or \s-1CLIPBOARD\s0; see the Inter-Client
Communication Conventions Manual for complete details.
\fISelection\fR defaults to \s-1PRIMARY\s0.
Returns an empty string.
.Ip "\fI$widget\fR\->\fBSelectionGet\fR?(?\fB\-selection\fR=>\fIselection\fR?,?\fB\-type\fR=>\fItype\fR?)?" 4
Retrieves the value of \fIselection\fR from \fI$widget\fR's display and
returns it as a result.  \fISelection\fR defaults to \s-1PRIMARY\s0.
.Sp
\fIType\fR specifies the form in which the selection is to be returned
(the desired ``target'\*(R' for conversion, in \s-1ICCCM\s0 terminology), and
should be an atom name such as \s-1STRING\s0 or \s-1FILE_NAME\s0; see the
Inter-Client Communication Conventions Manual for complete details.
\fIType\fR defaults to \s-1STRING\s0.  The selection owner may choose to
return the selection in any of several different representation
formats, such as \s-1STRING\s0, \s-1ATOM\s0, \s-1INTEGER\s0, etc. (this format is different
than the selection type; see the \s-1ICCCM\s0 for all the confusing details).
.Sp
If \fIformat\fR is not \s-1STRING\s0 then things get messy, the following
description is from the Tcl/Tk man page as yet incompetely translated for
the perl version \- it is misleading at best.
.Sp
If the selection is returned in a non-string format, such as \s-1INTEGER\s0
or \s-1ATOM\s0, the \fBSelectionGet\fR converts it to a list of perl
values: atoms are converted to their
textual names, and anything else is converted integers.
.Sp
A goal of the perl port is to provide better handling of different
formats than Tcl/Tk does, which should be possible given perl's
wider range of ``types'\*(R'. Although some thought went into this
in very early days of perl/Tk what exactly happens is still
\*(L"not quite right\*(R" and subject to change.
.Ip "\fI$widget\fR\->\fBSelectionHandle\fR(?\fB\-selection\fR=>\fIselection\fR?,?\fB\-type\fR=>\fItype\fR?,?\fB\-format\fR=>\fIformat\fR? \fIcallback\fR)" 4
Creates a handler for selection requests, such that \fIcallback\fR will
be executed whenever \fIselection\fR is owned by \fI$widget\fR and
someone attempts to retrieve it in the form given by \fItype\fR
(e.g. \fItype\fR is specified in the \fBselection get\fR command).
\fISelection\fR defaults to \s-1PRIMARY\s0, \fItype\fR defaults to \s-1STRING\s0, and
\fIformat\fR defaults to \s-1STRING\s0.  If \fIcallback\fR is an empty string
then any existing handler for \fI$widget\fR, \fItype\fR, and
\fIselection\fR is removed.
When \fIselection\fR is requested, \fI$widget\fR is the selection owner,
and \fItype\fR is the requested type, \fIcallback\fR will be executed
with two additional arguments.
The two additional arguments
are \fIoffset\fR and \fImaxBytes\fR:  \fIoffset\fR specifies a starting
character position in the selection and \fImaxBytes\fR gives the maximum
number of bytes to retrieve.  The command should return a value consisting
of at most \fImaxBytes\fR of the selection, starting at position
\fIoffset\fR.  For very large selections (larger than \fImaxBytes\fR)
the selection will be retrieved using several invocations of \fIcallback\fR
with increasing \fIoffset\fR values.  If \fIcallback\fR returns a string
whose length is less than \fImaxBytes\fR, the return value is assumed to
include all of the remainder of the selection;  if the length of
\fIcallback\fR's result is equal to \fImaxBytes\fR then
\fIcallback\fR will be invoked again, until it eventually
returns a result shorter than \fImaxBytes\fR.  The value of \fImaxBytes\fR
will always be relatively large (thousands of bytes).
.Sp
If \fIcallback\fR returns an error (e.g. via \fBdie\fR)
then the selection retrieval is rejected
just as if the selection didn't exist at all.
.Sp
The \fIformat\fR argument specifies the representation that should be
used to transmit the selection to the requester (the second column of
Table 2 of the \s-1ICCCM\s0), and defaults to \s-1STRING\s0.  If \fIformat\fR is
\s-1STRING\s0, the selection is transmitted as 8-bit \s-1ASCII\s0 characters (i.e.
just in the form returned by \fIcommand\fR).
.Sp
If \fIformat\fR is not \s-1STRING\s0 then things get messy, the following
description is from the Tcl/Tk man page as yet untranslated for
the perl version \- it is misleading at best.
.Sp
If \fIformat\fR is
\s-1ATOM\s0, then the return value from \fIcommand\fR is divided into fields
separated by white space;  each field is converted to its atom value,
and the 32-bit atom value is transmitted instead of the atom name.
For any other \fIformat\fR, the return value from \fIcommand\fR is
divided into fields separated by white space and each field is
converted to a 32-bit integer;  an array of integers is transmitted
to the selection requester.
.Sp
The \fIformat\fR argument is needed only for compatibility with
many selection requesters, except Tcl/Tk.  If Tcl/Tk is being
used to retrieve the selection then the value is converted back to
a string at the requesting end, so \fIformat\fR is
irrelevant.
.Sp
A goal of the perl port is to provide better handling of different
formats than Tcl/Tk does, which should be possible given perl's
wider range of ``types'\*(R'. Although some thought went into this
in very early days of perl/Tk what exactly happens is still
\*(L"not quite right\*(R" and subject to change.
.Ip "\fI$widget\fR\->\fBSelectionOwner\fR?(\fB\-selection\fR=>\fIselection\fR)?" 12
\fBSelectionOwner\fR returns the
window in this application that owns \fIselection\fR on the display
containing \fI$widget\fR, or an empty string if no window in this
application owns the selection.  \fISelection\fR defaults to \s-1PRIMARY\s0.
.Ip "\fI$widget\fR\->\fBSelectionOwn\fR?(?\fB\-command\fR=>\fIcallback\fR?,?\fB\-selection\fR=>\fIselection\fR?)?" 12
\fBSelectionOwn\fR causes \fI$widget\fR to become
the new owner of \fIselection\fR on \fI$widget\fR's display, returning
an empty string as result. The existing owner, if any, is notified
that it has lost the selection.
If \fIcallback\fR is specified, it will be executed when
some other window claims ownership of the selection away from
\fI$widget\fR.  \fISelection\fR defaults to \s-1PRIMARY\s0.
.SH "KEYWORDS"
clear, format, handler, ICCCM, own, selection, target, type

.rn }` ''
.IX Title "SELECTION 1"
.IX Name "Tk::Selection - Manipulate the X selection"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Item "\fI$widget\fR\->\fBSelectionClear\fR?(\fB\-selection\fR=>\fIselection\fR)?"

.IX Item "\fI$widget\fR\->\fBSelectionGet\fR?(?\fB\-selection\fR=>\fIselection\fR?,?\fB\-type\fR=>\fItype\fR?)?"

.IX Item "\fI$widget\fR\->\fBSelectionHandle\fR(?\fB\-selection\fR=>\fIselection\fR?,?\fB\-type\fR=>\fItype\fR?,?\fB\-format\fR=>\fIformat\fR? \fIcallback\fR)"

.IX Item "\fI$widget\fR\->\fBSelectionOwner\fR?(\fB\-selection\fR=>\fIselection\fR)?"

.IX Item "\fI$widget\fR\->\fBSelectionOwn\fR?(?\fB\-command\fR=>\fIcallback\fR?,?\fB\-selection\fR=>\fIselection\fR?)?"

.IX Header "KEYWORDS"

